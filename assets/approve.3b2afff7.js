import{d as q,a9 as L,r as _,aQ as U,aR as j,B as D,al as G,c as m,$ as h,a,n as t,t as s,e as l,a4 as g,aa as f,w as o,ab as M,a1 as E,b as r,aS as I,aW as Q,o as u,f as W,_ as H}from"./index.f1e91777.js";import{F as J,C as K,a as O}from"./index.2b8f9fa5.js";import{R as X,a as Y}from"./index.1d680b62.js";import{T as Z,p as y}from"./index.6a078400.js";import{T as F}from"./function-call.6b291167.js";const x=["onClick"],ee={key:1,class:"absolute xy"},ae=q({__name:"approve",setup(de){const T=I(),V=W(),A=L(),$=Number(T.query.id),n=_(),c=_(!1),d=_({status:"",remark:""});async function C(e){e.ids=[$],c.value=!0;const i=await Q(e);c.value=!1,i.success?(F.success(A.translate("operateSuccess")),V.go(-1)):F.fail(i.msg)}function ce(e){}return U($).then(e=>{n.value=e.data}),(e,i)=>{const v=Z,S=j,k=X,B=Y,b=J,w=K,R=D,z=O,N=G;return u(),m("div",{class:t(e.$style.page)},[n.value?(u(),m(h,{key:0},[a("div",{class:t(e.$style.execute)},[a("div",{class:t(e.$style.info)},[a("div",null,[a("span",{class:t(e.$style.name)},s(e.$translate("device.code"))+"\uFF1A",3),l(s(n.value.device.serialno),1)]),a("div",null,[a("span",{class:t(e.$style.name)},s(e.$translate("startTime"))+"\uFF1A",3),l(s(g(y)(n.value.startTime)),1)]),a("div",null,[a("span",{class:t(e.$style.name)},s(e.$translate("endTime"))+"\uFF1A",3),l(s(g(y)(n.value.endTime)),1)]),a("div",null,[a("span",{class:t(e.$style.name)},s(e.$translate("result"))+"\uFF1A",3),n.value.executeStatus==0?(u(),f(v,{key:0,size:"medium"},{default:o(()=>[l(s(e.$translate("incomplete")),1)]),_:1})):n.value.executeStatus==1?(u(),f(v,{key:1,type:"success",size:"medium"},{default:o(()=>[l(s(e.$translate("completed")),1)]),_:1})):(u(),f(v,{key:2,type:"danger",size:"medium"},{default:o(()=>[l(s(e.$translate("fail")),1)]),_:1}))]),a("div",null,[a("span",{class:t(e.$style.name)},s(e.$translate("execute.time"))+"\uFF1A",3),l(s(g(y)(n.value.executeTime)),1)]),a("div",null,[a("span",{class:t(e.$style.name)},s(e.$translate("image"))+"\uFF1A",3)])],2),n.value.images&&n.value.images.length>0?(u(),m("div",{key:0,class:t(e.$style.images)},[(u(!0),m(h,null,M(n.value.images,(p,P)=>(u(),m("div",{key:P,onClick:ve=>void 0},[r(S,{class:t(e.$style.image),height:200,src:e.$imageBaseUrl+p},null,8,["class","src"])],8,x))),128))],2)):E("",!0)],2),a("div",{class:t(e.$style.approvePart)},[r(z,{onSubmit:C},{default:o(()=>[r(w,null,{default:o(()=>[r(b,{label:e.$translate("approve.result"),name:"status",required:"",rules:[{required:!0,message:e.$translate("please.select.result")}]},{input:o(()=>[r(B,{modelValue:d.value.status,"onUpdate:modelValue":i[0]||(i[0]=p=>d.value.status=p),direction:"horizontal"},{default:o(()=>[r(k,{name:"pass"},{default:o(()=>[l(s(e.$translate("pass")),1)]),_:1}),r(k,{name:"reject"},{default:o(()=>[l(s(e.$translate("reject")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),r(b,{label:e.$translate("remark"),type:"textarea",name:"remark",modelValue:d.value.remark,"onUpdate:modelValue":i[1]||(i[1]=p=>d.value.remark=p),placeholder:e.$translate("input.remark"),maxlength:"200","show-word-limit":""},null,8,["label","modelValue","placeholder"])]),_:1}),a("div",{class:t(e.$style.button)},[r(R,{block:"",type:"primary","native-type":"submit",loading:c.value},{default:o(()=>[l(s(e.$translate("confirm")),1)]),_:1},8,["loading"])],2)]),_:1})],2)],64)):(u(),m("div",ee,[r(N,{type:"spinner",color:"#1989fa"})]))],2)}}}),se="_page_k08hs_1",te="_execute_k08hs_6",ne="_approvePart_k08hs_11",le="_info_k08hs_15",oe="_name_k08hs_18",re="_images_k08hs_22",ue="_image_k08hs_22",ie="_button_k08hs_33",me={page:se,execute:te,approvePart:ne,info:le,name:oe,images:re,image:ue,button:ie},pe={$style:me},ke=H(ae,[["__cssModules",pe]]);export{ke as default};
