import{c as U,d as H,w as j,o as se,a as oe,b as e,m as W,p as ie,P as re,e as z,n as Z,f as ce,u as K,I as ee,L as de,i as ue,g as _,h as fe,j as R,k as me,l as ye,r as N,q as pe,s as ge,t as he,T as ve,H as Fe,v as ke,x as $e,y as be,B as we,z as D,A as E,C as X,F as O,D as J,E as B,G as Ee,J as Q,K as k,M as v,N as r,O as b,Q as p,R as s,S as Ce,U as xe,V as Se,_ as De}from"./index.df0fb449.js";let T=0;function Be(t){t?(T||document.body.classList.add("van-toast--unclickable"),T++):T&&(T--,T||document.body.classList.remove("van-toast--unclickable"))}const[Te,M]=U("toast"),Me=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],ze={icon:String,show:Boolean,type:z("text"),overlay:Boolean,message:Z,iconSize:Z,duration:ce(2e3),position:z("middle"),teleport:[String,Object],className:K,iconPrefix:String,transition:z("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:K,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var te=H({name:Te,props:ze,emits:["update:show"],setup(t,{emit:l}){let c,d=!1;const F=()=>{const g=t.show&&t.forbidClick;d!==g&&(d=g,Be(d))},o=g=>l("update:show",g),a=()=>{t.closeOnClick&&o(!1)},i=()=>clearTimeout(c),u=()=>{const{icon:g,type:f,iconSize:h,iconPrefix:C,loadingType:S}=t;if(g||f==="success"||f==="fail")return e(ee,{name:g||f,size:h,class:M("icon"),classPrefix:C},null);if(f==="loading")return e(de,{class:M("loading"),size:h,type:S},null)},n=()=>{const{type:g,message:f}=t;if(ue(f)&&f!=="")return g==="html"?e("div",{key:0,class:M("text"),innerHTML:String(f)},null):e("div",{class:M("text")},[f])};return j(()=>[t.show,t.forbidClick],F),j(()=>[t.show,t.type,t.message,t.duration],()=>{i(),t.show&&t.duration>0&&(c=setTimeout(()=>{o(!1)},t.duration))}),se(F),oe(F),()=>e(re,W({class:[M([t.position,{[t.type]:!t.icon}]),t.className],lockScroll:!1,onClick:a,onClosed:i,"onUpdate:show":o},ie(t,Me)),{default:()=>[u(),n()]})}});const ne={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let w=[],V=!1,G=_({},ne);const L=new Map;function ae(t){return me(t)?t:{message:t}}function _e(){const{instance:t,unmount:l}=ye({setup(){const c=N(""),{open:d,state:F,close:o,toggle:a}=pe(),i=()=>{V&&(w=w.filter(n=>n!==t),l())},u=()=>e(te,W(F,{onClosed:i,"onUpdate:show":a}),null);return j(c,n=>{F.message=n}),ge().render=u,{open:d,clear:o,message:c}}});return t}function Ae(){if(!w.length||V){const t=_e();w.push(t)}return w[w.length-1]}function $(t={}){if(!fe)return{};const l=Ae(),c=ae(t);return l.open(_({},G,L.get(c.type||G.type),c)),l}const q=t=>l=>$(_({type:t},ae(l)));$.loading=q("loading");$.success=q("success");$.fail=q("fail");$.clear=t=>{var l;w.length&&(t?(w.forEach(c=>{c.clear()}),w=[]):V?(l=w.shift())==null||l.clear():w[0].clear())};function Oe(t,l){typeof t=="string"?L.set(t,l):_(G,t)}$.setDefaultOptions=Oe;$.resetDefaultOptions=t=>{typeof t=="string"?L.delete(t):(G=_({},ne),L.clear())};$.allowMultiple=(t=!0)=>{V=t};$.install=t=>{t.use(R(te)),t.config.globalProperties.$toast=$};const[Pe,Y]=U("tag"),Ie={size:String,mark:Boolean,show:he,type:z("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var Ne=H({name:Pe,props:Ie,emits:["close"],setup(t,{slots:l,emit:c}){const d=a=>{a.stopPropagation(),c("close",a)},F=()=>t.plain?{color:t.textColor||t.color,borderColor:t.color}:{color:t.textColor,background:t.color},o=()=>{var a;const{type:i,mark:u,plain:n,round:g,size:f,closeable:h}=t,C={mark:u,plain:n,round:g};f&&(C[f]=f);const S=h&&e(ee,{name:"cross",class:[Y("close"),Fe],onClick:d},null);return e("span",{style:F(),class:Y([C,i])},[(a=l.default)==null?void 0:a.call(l),S])};return()=>e(ve,{name:t.closeable?"van-fade":void 0},{default:()=>[t.show?o():null]})}});const Ge=R(Ne),[Le,P]=U("empty"),He={image:z("default"),imageSize:[Number,String,Array],description:String};var Ve=H({name:Le,props:He,setup(t,{slots:l}){const c=()=>{const y=l.description?l.description():t.description;if(y)return e("p",{class:P("description")},[y])},d=()=>{if(l.default)return e("div",{class:P("bottom")},[l.default()])},F=ke(),o=y=>`${F}-${y}`,a=y=>`url(#${o(y)})`,i=(y,x,le)=>e("stop",{"stop-color":y,offset:`${x}%`,"stop-opacity":le},null),u=(y,x)=>[i(y,0),i(x,100)],n=y=>[e("defs",null,[e("radialGradient",{id:o(y),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)"},[i("#EBEDF0",0),i("#F2F3F5",100,.3)])]),e("ellipse",{fill:a(y),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8"},null)],g=()=>[e("defs",null,[e("linearGradient",{id:o("a"),x1:"64%",y1:"100%",x2:"64%"},[i("#FFF",0,.5),i("#F2F3F5",100)])]),e("g",{opacity:".8"},[e("path",{d:"M36 131V53H16v20H2v58h34z",fill:a("a")},null),e("path",{d:"M123 15h22v14h9v77h-31V15z",fill:a("a")},null)])],f=()=>[e("defs",null,[e("linearGradient",{id:o("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%"},[i("#F2F3F5",0,.3),i("#F2F3F5",100)])]),e("g",{opacity:".8"},[e("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:a("b")},null),e("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:a("b")},null)])],h=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{id:o(1),x1:"64%",y1:"100%",x2:"64%"},[i("#FFF",0,.5),i("#F2F3F5",100)]),e("linearGradient",{id:o(2),x1:"50%",x2:"50%",y2:"84%"},[i("#EBEDF0",0),i("#DCDEE0",100,0)]),e("linearGradient",{id:o(3),x1:"100%",x2:"100%",y2:"100%"},[u("#EAEDF0","#DCDEE0")]),e("radialGradient",{id:o(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[i("#EBEDF0",0),i("#FFF",100,0)])]),e("g",{fill:"none"},[g(),e("path",{fill:a(4),d:"M0 139h160v21H0z"},null),e("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:a(2)},null),e("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7"},[e("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:a(3)},null),e("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:a(3)},null),e("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:a(3)},null),e("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:a(3)},null)]),e("g",{transform:"translate(31 105)"},[e("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),e("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),e("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),C=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:o(5)},[u("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:o(6)},[u("#EAEDF1","#DCDEE0")]),e("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:o(7)},[u("#EAEDF1","#DCDEE0")])]),g(),f(),e("g",{transform:"translate(36 50)",fill:"none"},[e("g",{transform:"translate(8)"},[e("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),e("rect",{fill:a(5),width:"64",height:"66",rx:"2"},null),e("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),e("g",{transform:"translate(15 17)",fill:a(6)},[e("rect",{width:"34",height:"6",rx:"1"},null),e("path",{d:"M0 14h34v6H0z"},null),e("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),e("rect",{fill:a(7),y:"61",width:"88",height:"28",rx:"1"},null),e("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),S=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:o(8)},[u("#EAEDF1","#DCDEE0")])]),g(),f(),n("c"),e("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:a(8)},null)]),A=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:o(9)},[u("#EEE","#D8D8D8")]),e("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:o(10)},[u("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:o(11)},[u("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:o(12)},[u("#FFF","#F7F8FA")])]),g(),f(),n("d"),e("g",{transform:"rotate(-45 113 -4)",fill:"none"},[e("rect",{fill:a(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),e("rect",{fill:a(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),e("circle",{stroke:a(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),e("circle",{fill:a(12),cx:"27",cy:"27",r:"16"},null),e("path",{d:"M37 7c-8 0-15 5-16 12",stroke:a(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),m=()=>{var y;if(l.image)return l.image();const x={error:S,search:A,network:h,default:C};return((y=x[t.image])==null?void 0:y.call(x))||e("img",{src:t.image},null)};return()=>e("div",{class:P()},[e("div",{class:P("image"),style:$e(t.imageSize)},[m()]),c(),d()])}});const je=R(Ve);function I(t,l="{y}-{m}-{d} {h}:{i}:{s}"){if(t==0||t==null)return"";if(arguments.length===0)return null;const c=l;let d;typeof t=="object"?d=t:(!isNaN(t)&&(""+t).length===10&&(t=parseInt(t)*1e3),d=new Date(t));const F={y:d.getFullYear(),m:d.getMonth()+1,d:d.getDate(),h:d.getHours(),i:d.getMinutes(),s:d.getSeconds(),a:d.getDay()};return c.replace(/{(y|m|d|h|i|s|a)+}/g,(a,i)=>{let u=F[i];return i==="a"?["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u65E5"][u-1]:(a.length>0&&u<10&&(u="0"+u),u||0)})}const Ue=H({__name:"index",setup(t){const l=be(),c=N([]),d=N([]),F=N();function o(){Ee().then(n=>{c.value=n.data})}function a(n){c.value.splice(n,1)}function i(n){xe.confirm({message:l.translate("confirm.receive.the.task.doubtSymbol"),beforeClose(g){return g=="confirm"?new Promise(f=>{Se(c.value[n].id,c.value[n].action).then(h=>{f(!0),h.success?(c.value.splice(n,1),$.success(l.translate("operateSuccess")),F.value.reload()):$.fail(h.msg)})}):!0}})}function u(n){d.value.push(...n)}return o(),(n,g)=>{const f=je,h=Ge,C=we,S=Q("router-link"),A=Q("XLoadMore");return k(),D(O,null,[c.value.length==0&&d.value.length==0?(k(),E(f,{key:0,"image-size":"100",description:n.$translate("no.task")},null,8,["description"])):X("",!0),(k(!0),D(O,null,J(c.value,(m,y)=>(k(),D("div",{class:v(n.$style.item)},[r("span",{class:v(n.$style.new)},null,2),r("div",{class:v(n.$style.body)},[e(h,{type:"success",size:"large",mark:""},{default:b(()=>[p(s(n.$translate(m.typeName)),1)]),_:2},1024),r("div",{class:v(n.$style.info)},[r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("startTime")),3),p("\uFF1A"+s(B(I)(m.startTime)),1)]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("endTime")),3),p("\uFF1A"+s(B(I)(m.startTime)),1)]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("device.code")),3),p("\uFF1A"+s(m.device.serialno),1)]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("address")),3),p("\uFF1A"+s(m.device.address),1)])],2)],2),r("div",{class:v(n.$style.footer)},[m.action==1?(k(),D(O,{key:0},[m.executorId==0?(k(),E(C,{key:0,type:"primary",size:"small",onClick:x=>i(y)},{default:b(()=>[p(s(n.$translate("receive")),1)]),_:2},1032,["onClick"])):(k(),E(h,{key:1,closeable:"",size:"large",onClose:x=>a(y)},{default:b(()=>[p(s(n.$translate("receivedByOthers")),1)]),_:2},1032,["onClose"]))],64)):X("",!0)],2)],2))),256)),(k(!0),D(O,null,J(d.value,(m,y)=>(k(),D("div",{class:v(n.$style.item)},[e(S,{to:"/task/"+m.id,class:v(n.$style.body)},{default:b(()=>[e(h,{type:"success",size:"large",mark:""},{default:b(()=>[p(s(n.$translate(m.typeName)),1)]),_:2},1024),r("div",{class:v(n.$style.info)},[r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("startTime")),3),p("\uFF1A"+s(B(I)(m.startTime)),1)]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("endTime")),3),p("\uFF1A"+s(B(I)(m.startTime)),1)]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("device.code")),3),p("\uFF1A"+s(m.device.serialno),1)]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("address")),3),p("\uFF1A"+s(m.device.address),1)]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("executeStatus")),3),p("\uFF1A "),m.executeStatus==0?(k(),E(h,{key:0,size:"medium"},{default:b(()=>[p(s(n.$translate("incomplete")),1)]),_:1})):m.executeStatus==1?(k(),E(h,{key:1,type:"success",size:"medium"},{default:b(()=>[p(s(n.$translate("completed")),1)]),_:1})):(k(),E(h,{key:2,type:"danger",size:"medium"},{default:b(()=>[p(s(n.$translate("fail")),1)]),_:1}))]),r("div",null,[r("span",{class:v(n.$style.name)},s(n.$translate("approveStatus")),3),p("\uFF1A "),m.approveStatus==0?(k(),E(h,{key:0,size:"medium"},{default:b(()=>[p(s(n.$translate("incomplete")),1)]),_:1})):m.approveStatus==1?(k(),E(h,{key:1,type:"success",size:"medium"},{default:b(()=>[p(s(n.$translate("pass")),1)]),_:1})):(k(),E(h,{key:2,type:"danger",size:"medium"},{default:b(()=>[p(s(n.$translate("reject")),1)]),_:1}))])],2)]),_:2},1032,["to","class"])],2))),256)),e(A,{ref_key:"loadMoreRef",ref:F,api:B(Ce),onFinish:u},null,8,["api"])],64)}}}),Re="_item_b15bx_1",qe="_body_b15bx_18",Ze="_info_b15bx_22",Ke="_name_b15bx_27",Xe="_footer_b15bx_31",Je={item:Re,new:"_new_b15bx_9",body:qe,info:Ze,name:Ke,footer:Xe},Qe={$style:Je},We=De(Ue,[["__cssModules",Qe]]);export{We as default};
